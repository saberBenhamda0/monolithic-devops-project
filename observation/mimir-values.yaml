# Enable only the monolithic mimir component
mimir:
  enabled: true
  replicas: 1
  
  # Configure as monolithic (all-in-one)
  structuredConfig:
    # Run all components in single process
    target: all
    
    # Disable multi-tenancy
    multitenancy_enabled: false
    
    # Use filesystem storage (simple, no object storage needed)
    common:
      storage:
        backend: filesystem
    
    # Blocks storage - changed from /data/blocks to /data/tsdb
    blocks_storage:
      backend: filesystem
      filesystem:
        dir: /data/tsdb

    # TSDB configuration (separate from blocks_storage)
    tsdb:
      dir: /data/tsdb
    
    # Alertmanager storage
    alertmanager_storage:
      backend: filesystem
      filesystem:
        dir: /data/alertmanager
    
    # Ruler storage
    ruler_storage:
      backend: filesystem
      filesystem:
        dir: /data/ruler
    
    # Compactor - explicitly set separate path
    compactor:
      data_dir: /data/compactor
  
  # Persistence for data
  persistentVolume:
    enabled: true
    size: 10Gi
  
  # Resources
  resources:
    requests:
      cpu: 500m
      memory: 2Gi
    limits:
      cpu: 2
      memory: 4Gi

# Disable all distributed components
distributor:
  enabled: false

ingester:
  enabled: false

querier:
  enabled: false

query_frontend:
  enabled: false

store_gateway:
  enabled: false

compactor:
  enabled: false

ruler:
  enabled: false

alertmanager:
  enabled: false

# Disable nginx (not needed for monolithic)
nginx:
  enabled: false

# Minimal gateway configuration
gateway:
  enabled: true
  replicas: 1
  service:
    type: ClusterIP
    port: 8080

# Disable minio (we're using filesystem)
minio:
  enabled: false